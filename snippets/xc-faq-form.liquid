<div id="faq-form" data-form-root="true" data-forms-id="forms-root-783749" data-forms-text-color="#202020" data-forms-button-background-color="#90F209" data-forms-button-label-color="#262626" data-forms-links-color="#1878b9" data-forms-errors-color="#e02229" data-forms-text-alignment="center" data-forms-alignment="center" data-forms-padding-top="0" data-forms-padding-right="0" data-forms-padding-bottom="0" data-forms-padding-left="0" style="--inline-container-min-height: 125px">
</div>

<script>
  (function() {
    // styles + hide custom field inside shadow DOM of FAQ form
    function styleFaqForm() {
      const formContainer = document.querySelector('[data-forms-id="forms-root-783749"]');
      if (!formContainer) return false;

      const formEmbed = formContainer.querySelector('shopify-forms-embed');
      if (!formEmbed || !formEmbed.shadowRoot) return false;
      const shadowRoot = formEmbed.shadowRoot;

      // inject CSS once
      if (!shadowRoot.querySelector('style[data-faq-form-styling]')) {
        const style = document.createElement('style');
        style.setAttribute('data-faq-form-styling', 'true');
        style.textContent = `
          /* Hide "Секція звідки прийшла форма" if present */
          [data-testid="field-custom#block"] { display: none !important; }
          label[for="label-custom#block"], label[id="label-custom#block"] { display: none !important; }
          ._formFieldContainer_1mxsl_5:has([data-testid="field-custom#block"]),
          ._formFieldContainer_1mxsl_5:has(input[id="custom#block"]) { display: none !important; }

          /* Inputs */
          ._formInputField_nag3b_7,
          ._formPhoneInputField_piv1u_17,
          textarea,
          input[type="text"],
          input[type="tel"],
          input[type="email"] {
            border: 1px solid rgba(0, 46, 9, 0.12) !important;
            border-radius: 8px !important;
            box-shadow: none !important;
            padding: 10px 16px !important;
            color: #000B02 !important;
            font-size: 16px !important;
            font-style: normal !important;
            font-weight: 400 !important;
            line-height: 160% !important;
            width: 100% !important;
            box-sizing: border-box !important;
          }

          /* Labels */
          ._formFieldContainer_1mxsl_5 {
            position: relative !important;
            display: flex !important;
            flex-direction: column !important;
            margin-bottom: 16px !important;
            width: 100% !important;
          }
          ._formInputFieldLabel_1mxsl_38,
          label._formInputFieldLabel_1mxsl_38,
          label[id^="label-"],
          label[for^="label-"],
          label[id="label-custom#question"],
          label[for="label-custom#question"] {
            display: block !important;
            position: relative !important;
            top: 0 !important;
            left: 0 !important;
            transform: none !important;
            order: -1 !important;
            margin-bottom: 8px !important;
            color: rgba(0, 11, 2, 0.50) !important;
            font-size: 14px !important;
            font-style: normal !important;
            font-weight: 400 !important;
            line-height: 160% !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          label[style*="top"] { top: 0 !important; }
          
          /* Ensure textarea label is visible - more specific selectors */
          ._formFieldContainer_1mxsl_5:has(textarea) label,
          ._formFieldContainer_1mxsl_5:has(._textArea_17mgw_1) label,
          ._formFieldContainer_1mxsl_5:has(textarea[name="custom#question"]) label,
          label[id="label-custom#question"],
          label[for="label-custom#question"],
          label[for="label-custom#question"]._formInputFieldLabel_1mxsl_38,
          label[aria-labelledby*="custom#question"] {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            top: 0 !important;
            left: 0 !important;
            transform: none !important;
            order: -1 !important;
            margin-bottom: 8px !important;
            height: auto !important;
            width: auto !important;
            overflow: visible !important;
            color: rgba(0, 11, 2, 0.50) !important;
            font-size: 14px !important;
            font-weight: 400 !important;
            line-height: 160% !important;
          }
          
          /* Force textarea container to show label */
          ._formFieldContainer_1mxsl_5:has(textarea),
          ._formFieldContainer_1mxsl_5:has(._textArea_17mgw_1) {
            display: flex !important;
            flex-direction: column !important;
          }
          
          /* Remove background-color from ::before pseudo-element */
          ._formFieldContainer_1mxsl_5:has(textarea)::before,
          ._formFieldContainer_1mxsl_5:has(._textArea_17mgw_1)::before {
            background-color: transparent !important;
            background: none !important;
          }
          
          /* Make sure no label is hidden */
          label {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }

          /* Form container width */
          ._inline_1q1d2_47 ._formContainer_1q1d2_30,
          ._formContainer_1q1d2_30 {
            max-width: 100% !important;
            width: 100% !important;
          }
          
          /* App router block */
          [data-testid="app-router"] {
            display: block !important;
          }
          
          /* Layout: first two fields inline on wide screens */
          form._formFieldset_cit2d_82 {
            display: grid !important;
            grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
            gap: 16px !important;
            width: 100% !important;
            max-width: 100% !important;
            padding: 0 !important;
          }
          /* first two fields inline, others full width */
          form._formFieldset_cit2d_82 ._formFieldContainer_1mxsl_5:nth-of-type(1),
          form._formFieldset_cit2d_82 ._formFieldContainer_1mxsl_5:nth-of-type(2) {
            grid-column: auto !important;
          }
          form._formFieldset_cit2d_82 ._formFieldContainer_1mxsl_5:nth-of-type(n+3) {
            grid-column: 1 / -1 !important;
          }
          
          /* Mobile: all fields in one column */
          @media (max-width: 767px) {
            form._formFieldset_cit2d_82 {
              grid-template-columns: 1fr !important;
              width: 100% !important;
              max-width: 100% !important;
              margin: 0 !important;
              padding: 0 !important;
            }
            form._formFieldset_cit2d_82 ._formFieldContainer_1mxsl_5:nth-of-type(1),
            form._formFieldset_cit2d_82 ._formFieldContainer_1mxsl_5:nth-of-type(2),
            form._formFieldset_cit2d_82 ._formFieldContainer_1mxsl_5:nth-of-type(n+3) {
              grid-column: 1 / -1 !important;
              width: 100% !important;
              max-width: 100% !important;
            }
            ._inline_1q1d2_47 ._formContainer_1q1d2_30,
            ._formContainer_1q1d2_30 {
              width: 100% !important;
              max-width: 100% !important;
              margin: 0 !important;
              padding: 0 !important;
            }
          }
          /* Ensure text area spans full width */
          textarea,
          ._textArea_17mgw_1 {
            grid-column: 1 / -1 !important;
            min-height: 96px !important;
          }

          /* Phone block tweaks */
          ._formPhoneInputContainer_piv1u_6 {
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
            margin: 0 !important;
            width: 100% !important;
          }
          
          /* Phone input field container */
          ._formPhoneInputContainer_piv1u_6 ._formFieldContainer_1mxsl_5 {
            flex: 1 !important;
            width: 100% !important;
          }
          ._selectContainer_12thd_6,
          .phone-country-selector {
            display: none !important;
          }

          /* Button style (black pill) */
          button._formSubmitButton_cit2d_96,
          button[type="submit"],
          button[data-testid="btn-form-submit"] {
            border-radius: 9999px !important;
            background: #000 !important;
            color: #fff !important;
            padding: 12px 32px !important;
            font-size: 14px !important;
            font-style: normal !important;
            font-weight: 600 !important;
            line-height: 140% !important;
            letter-spacing: 0.28px !important;
            width: fit-content !important;
          }

          /* Error messages styling */
          output[role="alert"],
          output[role="alert"] *,
          ._formError_1mxsl_21 {
            display: block !important;
            position: relative !important;
            top: auto !important;
            left: auto !important;
            right: auto !important;
            bottom: auto !important;
            transform: none !important;
            margin: 0 !important;
            margin-top: 4px !important;
            margin-bottom: -16px !important;
            padding: 0 !important;
            color: #e02229 !important;
            font-size: 12px !important;
            font-style: normal !important;
            font-weight: 400 !important;
            line-height: 140% !important;
            text-align: left !important;
            white-space: normal !important;
            word-wrap: break-word !important;
            width: 100% !important;
            max-width: 100% !important;
            overflow: visible !important;
            visibility: visible !important;
            opacity: 1 !important;
          }

          /* Ensure error messages appear below fields, not beside them */
          ._formFieldContainer_1mxsl_5:has(output[role="alert"]),
          ._formPhoneInputContainer_piv1u_6:has(output[role="alert"]) {
            flex-direction: column !important;
            align-items: flex-start !important;
          }

          /* Error message that comes after field container (like first_name) */
          ._formFieldContainer_1mxsl_5 + output[role="alert"],
          ._formFieldContainer_1mxsl_5._withError_1mxsl_17 + output[role="alert"] {
            margin-top: 4px !important;
            margin-bottom: -16px !important;
            display: block !important;
            width: 100% !important;
            grid-column: 1 / -1 !important;
          }

          /* Error message inside field container */
          ._formFieldContainer_1mxsl_5 output[role="alert"],
          ._formPhoneInputContainer_piv1u_6 output[role="alert"] {
            order: 999 !important;
            margin-top: 4px !important;
            margin-bottom: -16px !important;
          }

          /* Error message in form (general) */
          form._formFieldset_cit2d_82 output[role="alert"] {
            grid-column: 1 / -1 !important;
            margin-top: 4px !important;
            margin-bottom: -16px !important;
          }
          
          /* Error message after phone container */
          ._formPhoneInputContainer_piv1u_6 + output[role="alert"] {
            margin-top: 4px !important;
            margin-bottom: -16px !important;
            display: block !important;
            width: 100% !important;
            grid-column: 1 / -1 !important;
          }
          
          /* Error message after textarea container */
          ._formFieldContainer_1mxsl_5:has(textarea) + output[role="alert"] {
            margin-top: 4px !important;
            margin-bottom: -16px !important;
            display: block !important;
            width: 100% !important;
            grid-column: 1 / -1 !important;
          }
        `;
        shadowRoot.appendChild(style);
      }

      // remove inline styles from labels and ensure visibility
      shadowRoot.querySelectorAll('label._formInputFieldLabel_1mxsl_38, label[id^="label-"], label[for^="label-"], label').forEach((label) => {
        if (label.style.top) label.style.top = '0';
        if (label.style.transform) label.style.transform = 'none';
        if (label.style.position && label.style.position !== 'relative') label.style.position = 'relative';
        label.style.display = 'block';
        label.style.visibility = 'visible';
        label.style.opacity = '1';
      });
      
      // Find textarea and its label - aggressive approach
      const textarea = shadowRoot.querySelector('textarea[name="custom#question"], ._textArea_17mgw_1, textarea');
      if (textarea) {
        const textareaContainer = textarea.closest('._formFieldContainer_1mxsl_5');
        
        // Find label by various methods
        let textareaLabel = null;
        
        // Method 1: By ID
        textareaLabel = shadowRoot.querySelector('label[id="label-custom#question"]');
        
        // Method 2: By for attribute
        if (!textareaLabel) {
          textareaLabel = shadowRoot.querySelector('label[for="label-custom#question"]');
        }
        
        // Method 3: In same container
        if (!textareaLabel && textareaContainer) {
          textareaLabel = textareaContainer.querySelector('label');
        }
        
        // Method 4: By aria-labelledby
        if (!textareaLabel) {
          const ariaLabelId = textarea.getAttribute('aria-labelledby');
          if (ariaLabelId) {
            textareaLabel = shadowRoot.querySelector('#' + ariaLabelId);
          }
        }
        
        // Method 5: Find by text content "Запитайте нас"
        if (!textareaLabel) {
          const allLabels = shadowRoot.querySelectorAll('label');
          allLabels.forEach((label) => {
            if (label.textContent && label.textContent.includes('Запитайте нас')) {
              textareaLabel = label;
            }
          });
        }
        
        // Method 6: Find any label near textarea
        if (!textareaLabel && textareaContainer) {
          const allLabelsInContainer = textareaContainer.querySelectorAll('label');
          if (allLabelsInContainer.length > 0) {
            textareaLabel = allLabelsInContainer[allLabelsInContainer.length - 1];
          }
        }
        
        if (textareaLabel) {
          // Remove all inline styles that might hide it
          textareaLabel.removeAttribute('style');
          
          // Force all styles with !important via setProperty
          textareaLabel.style.setProperty('display', 'block', 'important');
          textareaLabel.style.setProperty('visibility', 'visible', 'important');
          textareaLabel.style.setProperty('opacity', '1', 'important');
          textareaLabel.style.setProperty('position', 'relative', 'important');
          textareaLabel.style.setProperty('top', '0', 'important');
          textareaLabel.style.setProperty('left', '0', 'important');
          textareaLabel.style.setProperty('transform', 'none', 'important');
          textareaLabel.style.setProperty('height', 'auto', 'important');
          textareaLabel.style.setProperty('width', 'auto', 'important');
          textareaLabel.style.setProperty('overflow', 'visible', 'important');
          textareaLabel.style.setProperty('margin-bottom', '8px', 'important');
          textareaLabel.style.setProperty('order', '-1', 'important');
          textareaLabel.style.setProperty('color', 'rgba(0, 11, 2, 0.50)', 'important');
          textareaLabel.style.setProperty('font-size', '14px', 'important');
          textareaLabel.style.setProperty('font-weight', '400', 'important');
          textareaLabel.style.setProperty('line-height', '160%', 'important');
          
          // Also ensure container shows it
          if (textareaContainer) {
            textareaContainer.style.setProperty('display', 'flex', 'important');
            textareaContainer.style.setProperty('flex-direction', 'column', 'important');
            
            // Move label before textarea if needed
            if (textareaContainer.contains(textareaLabel) && textareaContainer.contains(textarea)) {
              const labelPos = Array.from(textareaContainer.children).indexOf(textareaLabel);
              const textareaPos = Array.from(textareaContainer.children).indexOf(textarea);
              if (labelPos > textareaPos) {
                textareaContainer.insertBefore(textareaLabel, textarea);
              }
            }
          }
        }
      }
      
      // Also try to find and show all labels that might be hidden
      const allLabels = shadowRoot.querySelectorAll('label');
      allLabels.forEach((label) => {
        if (label.textContent && (label.textContent.includes('Запитайте нас') || label.textContent.includes('question'))) {
          label.style.setProperty('display', 'block', 'important');
          label.style.setProperty('visibility', 'visible', 'important');
          label.style.setProperty('opacity', '1', 'important');
        }
      });

      // hide field by text content if still visible
      const containers = shadowRoot.querySelectorAll('._formFieldContainer_1mxsl_5');
      containers.forEach((container) => {
        const text = (container.textContent || '').trim();
        if (text.includes('Секція звідки прийшла форма')) {
          container.style.display = 'none';
          container.style.visibility = 'hidden';
          container.style.height = '0';
          container.style.overflow = 'hidden';
        }
      });

      // Move error messages inside their field containers
      const fieldContainers = shadowRoot.querySelectorAll('._formFieldContainer_1mxsl_5');
      fieldContainers.forEach((container) => {
        // Find error message that comes right after this container
        const nextSibling = container.nextElementSibling;
        if (nextSibling && nextSibling.tagName === 'OUTPUT' && nextSibling.getAttribute('role') === 'alert') {
          // Move error inside container
          container.appendChild(nextSibling);
          // Ensure container has flex-direction column
          container.style.setProperty('display', 'flex', 'important');
          container.style.setProperty('flex-direction', 'column', 'important');
        }
      });

      // Handle phone input container errors
      const phoneContainers = shadowRoot.querySelectorAll('._formPhoneInputContainer_piv1u_6');
      phoneContainers.forEach((container) => {
        const nextSibling = container.nextElementSibling;
        if (nextSibling && nextSibling.tagName === 'OUTPUT' && nextSibling.getAttribute('role') === 'alert') {
          // For phone, we need to find the inner field container or create a wrapper
          const innerFieldContainer = container.querySelector('._formFieldContainer_1mxsl_5');
          if (innerFieldContainer) {
            innerFieldContainer.appendChild(nextSibling);
            innerFieldContainer.style.setProperty('display', 'flex', 'important');
            innerFieldContainer.style.setProperty('flex-direction', 'column', 'important');
          } else {
            // If no inner container, append to phone container itself
            container.appendChild(nextSibling);
            container.style.setProperty('flex-direction', 'column', 'important');
          }
        }
      });

      return true;
    }

    // retries
    const attempts = [0, 100, 300, 500, 800, 1000, 1500, 2000, 3000];
    attempts.forEach((d) => setTimeout(styleFaqForm, d));

    // observe container and shadow root
    const formContainer = document.querySelector('[data-forms-id="forms-root-783749"]');
    if (formContainer) {
      const containerObserver = new MutationObserver(() => setTimeout(styleFaqForm, 50));
      containerObserver.observe(formContainer, { childList: true, subtree: true });

      const checkFormEmbed = setInterval(() => {
        const formEmbed = formContainer.querySelector('shopify-forms-embed');
        if (formEmbed && formEmbed.shadowRoot) {
          const shadowObserver = new MutationObserver(() => setTimeout(styleFaqForm, 50));
          shadowObserver.observe(formEmbed.shadowRoot, { childList: true, subtree: true });
          setTimeout(styleFaqForm, 50);
          setTimeout(styleFaqForm, 200);
          setTimeout(styleFaqForm, 500);
          clearInterval(checkFormEmbed);
        }
      }, 100);
      setTimeout(() => clearInterval(checkFormEmbed), 10000);
    }
  })();
</script>